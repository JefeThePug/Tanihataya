<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace='com.example.group.repository.UsersMapper'>

	<!-- ユーザー除法の種お得 -->
	<select id="findByEmail" resultType="com.example.group.entity.Users">
		SELECT * FROM users WHERE email = #{email};
	</select>

	<!-- ユーザーキーで情報取得 -->
	<select id="findById"
		resultType="com.example.group.entity.Users">
		SELECT * FROM users WHERE users_id = #{users_id};
	</select>
	
	<!-- ユーザー名で取得 -->
	<select id="findByName" resultType="com.example.group.entity.Users">
	SELECT * FROM users WHERE name = #{user_name};
	</select>

	<!-- ユーザー情報の登録 -->
	<insert id="insert" parameterType="com.example.group.entity.Users">
		INSERT INTO users (name, email, password, postcode, address, tel, isActive, created_at, updated_at)
		VALUES(#{name},#{email},#{password},#{postcode},#{address},#{tel},TRUE,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP);
	</insert>
	
	<!-- ユーザー情報の更新 -->
	<update id="update" parameterType="com.example.group.entity.Users">
	 UPDATE users 
	    SET 
	        name = #{name}, 
	        email = #{email}, 
	        password = #{password}, 
	        postcode = #{postcode}, 
	        address = #{address}, 
	        tel = #{tel}, 
	        isActive = #{isActive}, 
	        updated_at = CURRENT_TIMESTAMP
	    WHERE 
	        usersId = #{usersId}
	</update>
	
	<delete id = "delete" parameterType="com.example.group.entity.Users">
	DELETE FROM users WHERE users_id = #{usersId}
	</delete>
</mapper>
