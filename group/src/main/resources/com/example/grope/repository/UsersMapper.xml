
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace='com.example.grope.repository'>

	<!-- ユーザー除法の種お得 -->
	<select id="findByEmail" resultType="com.example.group.entity.Users">
		SELECT * FROM users WHERE email = #{email};
	</select>

	<!-- ユーザーキーで情報取得 -->
	<select id="findById"
		resultType="com.example.group.entity.Users">
		SELECT * FROM users WHERE user_id = #{user_id};
	</select>
	
	<!-- ユーザー名で取得 -->
	<select id="findByName" resultType="com.example.group.entity.Users">
	SELECT * FROM users WHERE user_id = #{user_name};
	</select>

	<!-- ユーザー情報の登録 -->
	<insert id="insert">
		INSERT INTO users
		VALUES(#[userId],#{name},#{email},#{password],#{postcode},#{address},#{tel},#{isActive},CURRENT_TIMESTAMP,CURRENT_TIMESTAMP);
	</insert>
	
	<!-- ユーザー情報の更新 -->
	<update>
	 UPDATE users 
	    SET 
	        name = #{name}, 
	        email = #{email}, 
	        password = #{password}, 
	        postcode = #{postcode}, 
	        address = #{address}, 
	        tel = #{tel}, 
	        isActive = #{isActive}, 
	        updated_at = CURRENT_TIMESTAMP
	    WHERE 
	        id = #{id}
	</update>
	
	<delete id = "delete">
	DELETE FROM users WHERE user_id = #{userId}
	</delete>
</mapper>
